{"version":3,"file":"index.js","sources":["../src/index.ts","../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js"],"sourcesContent":["import { Point } from '@svg-drawing/core'\nimport type {\n  PathClass,\n  PathAttributes,\n  FrameAnimation,\n} from '@svg-drawing/core'\n\nexport class ShakeFrame implements FrameAnimation {\n  public readonly loops = 10\n  constructor(private range: number = 5) {\n    this.animation = this.animation.bind(this)\n  }\n\n  private randomNumber() {\n    return Math.random() * this.range - this.range / 2\n  }\n\n  public animation(paths: PathClass[]) {\n    for (let i = 0; i < paths.length; i += 1) {\n      paths[i].updateCommands(\n        paths[i].absoluteCommands.map((c) => {\n          const update = c.clone()\n\n          update.points = c.points.map((po) =>\n            po.add(new Point(this.randomNumber(), this.randomNumber()))\n          )\n          return update\n        })\n      )\n    }\n    return paths\n  }\n}\n\nexport class AttributeFrame implements FrameAnimation {\n  constructor(private attributesList: PathAttributes[]) {\n    this.animation = this.animation.bind(this)\n  }\n\n  get loops(): number {\n    return this.attributesList.length\n  }\n\n  animation(paths: PathClass[], key: number) {\n    const attr = this.attributesList[key]\n    if (!attr) return paths\n\n    for (let i = 0; i < paths.length; i += 1) {\n      paths[i].updateAttributes(attr)\n    }\n    return paths\n  }\n}\n\nexport class DrawFrame implements FrameAnimation {\n  constructor(private paths: PathClass[]) {\n    this.animation = this.animation.bind(this)\n  }\n\n  get loops(): number {\n    return this.paths.reduce((acc, p) => acc + p.absoluteCommands.length, 0)\n  }\n\n  animation(paths: PathClass[], key: number) {\n    let count = key\n    const update = []\n    for (let i = 0; i < paths.length; i += 1) {\n      const path = paths[i]\n      const vertexLength = path.absoluteCommands.length\n\n      path.updateCommands(path.absoluteCommands.slice(0, count))\n      update.push(path)\n\n      count -= vertexLength\n      if (count < 0) break\n    }\n    return update\n  }\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}"],"names":["ShakeFrame","constructor","range","obj","key","value","this","Object","defineProperty","enumerable","configurable","writable","animation","bind","randomNumber","Math","random","paths","i","length","updateCommands","absoluteCommands","map","c","update","clone","points","po","add","Point","AttributeFrame","attributesList","loops","attr","updateAttributes","DrawFrame","reduce","acc","p","count","path","vertexLength","slice","push"],"mappings":";;;;;;0CAOO,MAAMA,EAEXC,YAAoBC,GCTP,IAAyBC,EAAKC,EAAKC,ODST,IAAnBH,IAAAA,EAAgB,GAAGI,KAAnBJ,MAAAA,ECT4BG,EDQxB,ICRmBD,EDSJ,WCTDD,EDSCG,MCPrCC,OAAOC,eAAeL,EAAKC,EAAK,CAC9BC,MAAOA,EACPI,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZR,EAAIC,GAAOC,EDCXC,KAAKM,UAAYN,KAAKM,UAAUC,KAAKP,KACtC,CAEOQ,eACN,OAAOC,KAAKC,SAAWV,KAAKJ,MAAQI,KAAKJ,MAAQ,CAClD,CAEMU,UAAUK,GACf,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,GAAK,EACrCD,EAAMC,GAAGE,eACPH,EAAMC,GAAGG,iBAAiBC,KAAKC,IAC7B,MAAMC,EAASD,EAAEE,QAKjB,OAHAD,EAAOE,OAASH,EAAEG,OAAOJ,KAAKK,GAC5BA,EAAGC,IAAI,IAAIC,EAAMvB,KAAKQ,eAAgBR,KAAKQ,mBAEtCU,CAAP,KAIN,OAAOP,CACR,EAGI,MAAMa,EACX7B,YAAoB8B,GAAkCzB,KAAlCyB,eAAAA,EAClBzB,KAAKM,UAAYN,KAAKM,UAAUC,KAAKP,KACtC,CAEG0B,YACF,OAAO1B,KAAKyB,eAAeZ,MAC5B,CAEDP,UAAUK,EAAoBb,GAC5B,MAAM6B,EAAO3B,KAAKyB,eAAe3B,GACjC,IAAK6B,EAAM,OAAOhB,EAElB,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,GAAK,EACrCD,EAAMC,GAAGgB,iBAAiBD,GAE5B,OAAOhB,CACR,EAGI,MAAMkB,EACXlC,YAAoBgB,GAAoBX,KAApBW,MAAAA,EAClBX,KAAKM,UAAYN,KAAKM,UAAUC,KAAKP,KACtC,CAEG0B,YACF,OAAO1B,KAAKW,MAAMmB,QAAO,CAACC,EAAKC,IAAMD,EAAMC,EAAEjB,iBAAiBF,QAAQ,EACvE,CAEDP,UAAUK,EAAoBb,GAC5B,IAAImC,EAAQnC,EACZ,MAAMoB,EAAS,GACf,IAAK,IAAIN,EAAI,EAAGA,EAAID,EAAME,OAAQD,GAAK,EAAG,CACxC,MAAMsB,EAAOvB,EAAMC,GACbuB,EAAeD,EAAKnB,iBAAiBF,OAM3C,GAJAqB,EAAKpB,eAAeoB,EAAKnB,iBAAiBqB,MAAM,EAAGH,IACnDf,EAAOmB,KAAKH,GAEZD,GAASE,EACLF,EAAQ,EAAG,KAChB,CACD,OAAOf,CACR"}